<!DOCTYPE html>
<html lang="en">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">body {
  font-family: 'Poppins', sans-serif;
}

h1, h2 {
  font-family: 'Playfair Display', serif;
  font-size: 3rem;
  letter-spacing: 2px;
}
<meta charset="UTF-8">
<title>For Rianne â¤ï¸</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

<style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Poppins', sans-serif;
}

h1, h2 {
  font-family: 'Playfair Display', serif;
  font-size: 3rem;
  letter-spacing: 2px;
}


html, body {
  height: 100%;
  background: radial-gradient(circle at top, #ff7eb3, #1b1b2f);
  overflow: hidden;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
}

body {
  color: white;
  position: relative;
}

/* FULLSCREEN SCREENS (WORKING VERSION CORE) */
.screen {
  position: fixed;
  inset: 0;
  height: 100dvh;
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 0;
  pointer-events: none;
  transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  transform: translateY(15px) scale(0.98);
  padding: 20px;
  z-index: 10;
}

.screen.active {
  opacity: 1;
  pointer-events: all;
  transform: translateY(0) scale(1);
}

/* Enhanced stars with multiple layers and better twinkling */
.stars {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -1;
}

.stars::before, .stars::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image:
    radial-gradient(1px 1px at 20% 30%, white, transparent),
    radial-gradient(1px 1px at 80% 60%, white, transparent),
    radial-gradient(1px 1px at 50% 90%, white, transparent),
    radial-gradient(1px 1px at 40% 40%, white, transparent),
    radial-gradient(1px 1px at 70% 20%, white, transparent);
  animation: twinkle 4s infinite alternate;
  opacity: 0.4;
}

.stars::after {
  background-image:
    radial-gradient(2px 2px at 10% 80%, #ff99cc, transparent),
    radial-gradient(2px 2px at 90% 10%, #ff99cc, transparent),
    radial-gradient(2px 2px at 60% 70%, #ff99cc, transparent);
  animation: twinkle 6s infinite alternate-reverse;
  opacity: 0.2;
}

@keyframes twinkle {
  from { opacity: 0.2; }
  to { opacity: 0.6; }
}

/* Improved card design (original beautiful style) */
.card {
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border-radius: 20px;
  padding: 35px 25px;
  text-align: center;
  max-width: 420px;
  width: 100%;
  box-shadow: 0 0 30px rgba(0,0,0,0.3);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  position: relative;
  overflow: hidden;
}

.card::before {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  transition: left 1.5s ease;
}

.card:hover::before {
  left: 100%;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 40px rgba(0,0,0,0.4);
}

/* Enhanced buttons (original beautiful style) */
button {
  margin-top: 20px;
  padding: 12px 30px;
  border-radius: 30px;
  border: none;
  background: #ff4d94;
  color: white;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 15px rgba(255, 77, 148, 0.3);
  position: relative;
  overflow: hidden;
  font-weight: 600;
}

button::before {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: rgba(255,255,255,0.2);
  transition: left 0.4s ease;
}

button:hover::before {
  left: 100%;
}

button:hover {
  background: #ff3385;
  transform: scale(1.05);
  box-shadow: 0 6px 20px rgba(255, 77, 148, 0.4);
}

button:active {
  transform: scale(0.98);
}

/* Password input with better focus effects */
#passwordInput {
  width: 85%;
  padding: 12px 15px;
  margin: 20px 0;
  border-radius: 30px;
  border: none;
  background: rgba(255,255,255,0.2);
  color: white;
  font-size: 1rem;
  outline: none;
  text-align: center;
  transition: all 0.3s ease;
}

#passwordInput::placeholder {
  color: rgba(255,255,255,0.7);
}

#passwordInput:focus {
  background: rgba(255,255,255,0.3);
  box-shadow: 0 0 15px rgba(255, 77, 148, 0.4);
  transform: scale(1.02);
}

/* BIGGER Heart Container (180px wide - much larger) */
.heart-img-container {
  width: 180px; /* Increased from 130px â†’ BIGGER heart */
  height: 165px; /* Proportional height for perfect heart shape */
  margin: 0 auto 20px;
  position: relative;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  transition: all 0.4s ease;
  box-shadow: 0 0 15px rgba(255, 77, 148, 0.4);
  -webkit-animation: heartPop 0.8s ease-out forwards, pulse 3s infinite alternate;
  animation: heartPop 0.8s ease-out forwards, pulse 3s infinite alternate;
  opacity: 0;
  /* Standard heart SVG (matches â¤ï¸ emoji) */
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ff4d94'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E");
  background-size: 100% 100%;
  background-repeat: no-repeat;
  background-position: center;
}

/* Avatar Wrapper (KEEPS original 80x80px size) */
.heart-img-wrapper {
  width: 80px; /* UNCHANGED - stays original size */
  height: 80px; /* UNCHANGED - stays original size */
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%); /* Perfect center in big heart */
  z-index: 2;
  border-radius: 50%;
  overflow: hidden;
  border: 3px solid white;
}

/* Also update mobile responsive style (keep avatar small) */
@media (max-width: 400px) {
  .heart-img-container {
    width: 150px; /* Slightly smaller on mobile but still big */
    height: 140px;
  }
  
  .heart-img-wrapper {
    width: 70px; /* Smaller avatar on mobile (still proportional) */
    height: 70px;
  }
}
.heart-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
}

/* åŠ¨ç”»ï¼šä»…ç¼©æ”¾å’Œé€æ˜åº¦ï¼Œæ— æ—‹è½¬ */
@keyframes heartPop {
  0% { opacity: 0; transform: scale(0.8); }
  80% { transform: scale(1.05); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes pulse {
  0% { box-shadow: 0 0 15px rgba(255, 77, 148, 0.4); }
  100% { box-shadow: 0 0 25px rgba(255, 77, 148, 0.7); }
}

/* Hoveræ•ˆæœï¼šä»…ç¼©æ”¾ï¼Œæ— æ—‹è½¬ */
.heart-img-container:hover {
  transform: scale(1.1);
  box-shadow: 0 0 25px rgba(255, 77, 148, 0.7);
  animation: none;
}

.heart-img-container:hover .heart-img {
  transform: scale(1.1);
}

/* Text boxes (working version structure + original animations) */
.textBox {
  display: none;
  width: 100%;
  opacity: 0;
  transform: translateY(15px);
  transition: all 0.6s ease;
}

.textBox.active {
  display: block;
  opacity: 1;
  transform: translateY(0);
}

.contentText {
  line-height: 1.6;
  font-size: 1.05rem;
  margin-bottom: 20px;
  min-height: 80px;
}

/* Floating hearts (working version animation) */
.heart {
  position: fixed;
  bottom: -20px;
  width: 12px;
  height: 12px;
  background: #ff4d94;
  transform: rotate(45deg);
  animation: floatUp 8s linear forwards;
  pointer-events: none;
  opacity: 0.8;
}

.heart::before, .heart::after {
  content: "";
  position: absolute;
  width: 12px;
  height: 12px;
  background: #ff4d94;
  border-radius: 50%;
}

.heart::before { top: -6px; left: 0; }
.heart::after { left: -6px; top: 0; }

@keyframes floatUp {
  to { transform: translateY(-110dvh) rotate(45deg); opacity: 0; }
}

/* Confetti (working version animation + original colors) */
.confetti {
  position: fixed;
  top: -10px;
  width: 8px;
  height: 8px;
  animation: confettiFall 5s linear forwards;
  pointer-events: none;
}

@keyframes confettiFall {
  to { transform: translateY(110dvh) rotate(720deg); opacity: 0; }
}

/* Valentine screen enhancements */
.button-zone {
  position: relative;
  margin-top: 30px;
  height: 80px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
  flex-wrap: wrap;
}

#noBtn {
  position: relative;
  transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

/* YES CELEBRATION SCREEN (original beautiful style) */
#yesCelebrationScreen {
  background: radial-gradient(circle, #ff3385, #ff7eb3, #1b1b2f);
  z-index: 100; /* Top layer */
  flex-direction: column;
  gap: 30px;
}

.celebration-text {
  text-align: center;
  max-width: 500px;
}

.celebration-text h2 {
  font-size: 2.2rem;
  margin-bottom: 20px;
  color: #fff;
  text-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
  animation: bounce 2s infinite alternate;
}

@keyframes bounce {
  0% { transform: translateY(0); }
  100% { transform: translateY(-10px); }
}

.celebration-text p {
  font-size: 1.1rem;
  line-height: 1.8;
  margin-bottom: 15px;
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.8s ease;
}

.celebration-text p.active {
  opacity: 1;
  transform: translateY(0);
}

/* Memory gallery */
.memory-gallery {
  display: flex;
  gap: 15px;
  margin: 20px 0;
}

.memory-thumbnail {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  overflow: hidden;
  border: 3px solid white;
  box-shadow: 0 0 15px rgba(255, 77, 148, 0.7);
  opacity: 0;
  transform: scale(0.5);
  animation: thumbnailPop 1s ease-out forwards;
}

.memory-thumbnail:nth-child(1) { animation-delay: 0.5s; }
.memory-thumbnail:nth-child(2) { animation-delay: 0.8s; }

.memory-thumbnail img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

@keyframes thumbnailPop {
  0% { opacity: 0; transform: scale(0.5); }
  100% { opacity: 1; transform: scale(1); }
}

/* Final CTA button */
.final-cta {
  padding: 15px 40px;
  font-size: 1.2rem;
  background: white;
  color: #ff3385;
  box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
  border-radius: 50px;
  cursor: pointer;
  transition: all 0.3s ease;
  opacity: 0;
  transform: translateY(20px);
  border: none;
  font-weight: bold;
}

.final-cta.active {
  opacity: 1;
  transform: translateY(0);
}

.final-cta:hover {
  transform: scale(1.1);
  box-shadow: 0 0 30px rgba(255, 255, 255, 0.8);
}

/* Responsive for mobile */
@media (max-width: 400px) {
  .card {
    padding: 25px 20px;
  }
  
  .heart-img-container {
    width: 110px;
    height: 100px; /* è°ƒæ•´é«˜åº¦ä¿æŒçˆ±å¿ƒæ¯”ä¾‹ */
  }
  
  .heart-img-wrapper {
    width: 70px;
    height: 70px; /* é€‚é…å°çˆ±å¿ƒçš„å¤´åƒå¤§å° */
  }
  
  .button-zone {
    gap: 10px;
  }
  
  button {
    padding: 10px 25px;
    font-size: 0.9rem;
  }

  .celebration-text h2 {
    font-size: 1.8rem;
  }

  .celebration-text p {
    font-size: 1rem;
  }

  .memory-thumbnail {
    width: 60px;
    height: 60px;
  }
}
</style>
</head>

<body>
<div class="stars"></div>

<!-- INTRO SCREEN -->
<div class="screen active" id="introScreen">
  <div class="card">
    <h1>Hi Rianne â¤ï¸</h1>
    <p style="margin: 20px 0; line-height: 1.6;">This isnâ€™t just a website.<br>Itâ€™s something I made for you.</p>
    <button onclick="goToAI()">Begin</button>
  </div>
</div>

<!-- AI LOADING SCREEN -->
<div class="screen" id="aiScreen">
  <div class="card">
    <p id="aiText">Initializingâ€¦</p>
  </div>
</div>

<!-- PASSWORD SCREEN -->
<div class="screen" id="passwordScreen">
  <div class="card">
    <p style="line-height: 1.6;">Protected memories ğŸ”<br>
    This space only opens<br>
    for the person this was made for â¤ï¸</p>
    <input id="passwordInput" placeholder="Password">
    <button onclick="unlock()">Unlock</button>
  </div>
</div>

<!-- FIRST CONTENT SCREEN (FIRST CONFESSION) -->
<div class="screen" id="contentScreen">
  <div class="card">
    <!-- ä¿®å¤åçš„çˆ±å¿ƒå®¹å™¨ -->
    <div class="heart-img-container" id="firstHeartContainer" onclick="openFirstHeart()">
      <div class="heart-img-wrapper">
        <img class="heart-img" src="hellokitty.jpg" alt="First Memory">
      </div>
    </div>
    <div class="textBox" id="firstTextBox">
      <p class="contentText" id="firstContentText"></p>
      <button onclick="nextFirstText()">Next</button>
    </div>
  </div>
</div>

<!-- SECOND CONTENT SCREEN (SECOND CONFESSION) -->
<div class="screen" id="secondContentScreen">
  <div class="card">
    <!-- ä¿®å¤åçš„çˆ±å¿ƒå®¹å™¨ -->
    <div class="heart-img-container" id="secondHeartContainer" onclick="openSecondHeart()">
      <div class="heart-img-wrapper">
        <img class="heart-img" src="melody.jpg" alt="Second Memory">
      </div>
    </div>
    <div class="textBox" id="secondTextBox">
      <p class="contentText" id="secondContentText"></p>
      <button onclick="nextSecondText()">Next</button>
    </div>
  </div>
</div>

<!-- VALENTINE SCREEN -->
<div class="screen" id="valentineScreen">
  <div class="card">
    <h2 style="margin-bottom: 20px;">Rianne ğŸ’–</h2>
    <p style="font-size: 1.1rem; margin-bottom: 10px;">Will you be my girlfriend?</p>
    <div class="button-zone">
      <button onclick="yes()">Yes ğŸ’•</button>
      <button id="noBtn" onmouseover="moveNo()" ontouchstart="moveNo()">No ğŸ™ƒ</button>
    </div>
  </div>
</div>

<!-- YES CELEBRATION SCREEN -->
<div class="screen" id="yesCelebrationScreen">
  <div class="celebration-text">
    <h2>MY GIRLFRIEND ğŸ’–</h2>
    <p id="celebrationLine1">I have fallen in love with youğŸ’–</p>
    <p id="celebrationLine2">I know this is not the perfect valentines, but I will keep trying my best</p>
    <p id="celebrationLine3"></p>
    <p id="celebrationLine4"></p>
  </div>
  
  <!-- Memory gallery -->
  <div class="memory-gallery">
    <div class="memory-thumbnail">
      <img src="hellokitty.jpg" alt="First Memory">
    </div>
    <div class="memory-thumbnail">
      <img src="melody.jpg" alt="Second Memory">
    </div>
  </div>
  
  <!-- Final cute CTA -->
  <button class="final-cta" id="finalCtaBtn" onclick="finalMessage()">
    Hug me later ğŸ«‚
  </button>
</div>

<script>
// Screen references (Working Version Structure)
const screens = {
  intro: document.getElementById("introScreen"),
  ai: document.getElementById("aiScreen"),
  pass: document.getElementById("passwordScreen"),
  content: document.getElementById("contentScreen"),
  secondContent: document.getElementById("secondContentScreen"),
  val: document.getElementById("valentineScreen"),
  yes: document.getElementById("yesCelebrationScreen")
};

// Screen switch function (Working Version Core)
function switchScreen(from, to) {
  screens[from].classList.remove("active");
  setTimeout(() => screens[to].classList.add("active"), 300);
}

// Create floating hearts background (Working Version Animation)
setInterval(() => {
  const h = document.createElement("div");
  h.className = "heart";
  h.style.left = Math.random() * 100 + "vw";
  h.style.animationDelay = Math.random() * 8 + "s";
  document.body.appendChild(h);
  setTimeout(() => h.remove(), 8000);
}, 500);

// 1. Intro â†’ AI Loading Screen
function goToAI() {
  switchScreen("intro", "ai");

  const loadingSteps = [
    "Scanning emotionsâ€¦",
    "Analyzing memoriesâ€¦",
    "Confirming feelingsâ€¦",
    "Access granted â¤ï¸"
  ];

  let stepIndex = 0;
  const aiTextElement = document.getElementById("aiText");
  
  const loadingInterval = setInterval(() => {
    aiTextElement.innerText = loadingSteps[stepIndex];
    stepIndex++;
    
    if (stepIndex === loadingSteps.length) {
      clearInterval(loadingInterval);
      setTimeout(() => {
        switchScreen("ai", "pass");
      }, 1000);
    }
  }, 1100);
}

// 2. Unlock Password Screen
function unlock() {
  const inputValue = document.getElementById("passwordInput").value.trim().toLowerCase();
  if (inputValue === "rianne") {
    // Add success animation
    const passwordInput = document.getElementById("passwordInput");
    passwordInput.style.boxShadow = "0 0 20px rgba(102, 255, 102, 0.8)";
    
    setTimeout(() => {
      switchScreen("pass", "content");
    }, 500);
  } else {
    // Add shake animation for wrong password
    const passwordInput = document.getElementById("passwordInput");
    passwordInput.style.transform = "scale(1.02) translateX(-5px)";
    setTimeout(() => {
      passwordInput.style.transform = "scale(1.02) translateX(5px)";
      setTimeout(() => {
        passwordInput.style.transform = "scale(1.02) translateX(-5px)";
        setTimeout(() => {
          passwordInput.style.transform = "scale(1.02) translateX(0)";
        }, 100);
      }, 100);
    }, 100);
    
    alert("Only you would know the password â¤ï¸");
    passwordInput.value = "";
  }
}

// 3. FIRST CONFESSION Text Array (ä¿®å¤äº†å­—ç¬¦ä¸²æ‹¼æ¥é”™è¯¯)
const firstMemoryTexts = [
  "Dear Rianne",
  "Itâ€™s hard to believe weâ€™ve been talking for close to four months now. Somewhere between the conversations, the meetups, and the quiet moments in between, you became someone I genuinely care about. someone who feels important to me.",
  "Lets bring us back to our first meetup. I had zero expectations; it was casual, and I figured it would be nice, but nothing more.",
  "Then I saw you.",
  "You were beautiful in a way that caught me off guard, calm, a little mysterious, the kind of presence that makes you look twice without meaning to.",
  "I tried to act normal. I donâ€™t think I succeeded. I remember stealing small glances when you werenâ€™t looking, just to take you in for a moment longer.",
  "You said I felt moody and distant in our first few meetups, but I was just crazy nervous. My mind and heart raced, and all I wanted was to know more about you, the stories that make you laugh, the thoughts you keep close. I wanted the key to your heart, even if I had no idea where to start...",
  "I fumbled over my words sometimes. But every word was genuine every question, every smile, was just me trying in my own quiet way to show that you had my attention.",
  "I don't know without realizing it,Somewhere along the way, I noticed myself picking up my phone more often, hoping to see your name on my screen. I wanted to reply instantly every time, but I held back not because I didnâ€™t care, but because I didnâ€™t want to rush you or put pressure on you. I wanted this to feel right.",
  "From that day until now, youâ€™ve had this effortless way of making my heart race. I didnâ€™t ask how you felt back then because I wasnâ€™t sure if you were ready, and I didnâ€™t want to push or risk losing what we had. But the thought stayed with me. Every day. I knew you were someone I didnâ€™t want to let slip away.",
  "So I finally asked, who I was to you, how you saw me. And when you told me you saw me romantically, that you just needed time, it meant more to me than I ever said out loud.",
  "Everything weâ€™ve shared so far has been nothing but good memories to me. And the truth is, I donâ€™t just treasure what weâ€™ve had, I want what comes next. More moments, more laughter, more memoriesâ€¦ with you beside me."
];

let firstTextIndex = 0;

// 4. SECOND CONFESSION Text Array
const secondMemoryTexts = [
  "This feeling... its so strange.At first, I was just curious, curious to know you, to understand you, nothing more. But little by little, I found myself wanting to be closer, to stay by your side, to be with you always.",
  "I often find myself wondering when I first started liking you. Iâ€™ve replayed so many moments in my head, but none of them ever felt big enough to explain it.",
  "Then, I finally realized the moment I knew I fell in love with you wasnâ€™t because of a certain thing you did or said, nor was it because I heard a love song at night and needed someone to think of. It was when whenever I have something that I wanted to share, before I even reach for my phone, my heart already knows where to go. You are the first person I think about.",
  "I realized something.",
  "I have fallen in love with you.",
  "All I know is that Iâ€™ve fallen deeply, irrevocably in love with you. As time goes on, I find myself loving you more and more. Youâ€™ve become the quiet, steady center of my days, the part of my life I canâ€™t imagine being without.",
  "Waiting for your message feels like the sweetest, most precious kind of anticipation. Just knowing youâ€™re there makes me feel safe, makes my heart feel light and full. Thinking of you brings a smile to my face, a warmth to my chest. And I love you more with every passing day.",
  "And I want to be more than just the one who loves you. I want to be the one you can always rely on, the safe place where you can open up your heart, and share every part of yourself, without fear.",
  "I want to cherish you, not just in the easy moments, but in the quiet ones too. To listen to you, understand you, and love you with intention, patience, and my whole heart.",
  "Youâ€™re not just my crush.",
  "Youâ€™re my choice.",
  "Youâ€™re my everything, Rianne.",
  "And nowâ€¦ I have one final question for you ğŸ’–"
];

let secondTextIndex = 0;

// Typewriter effect for text
function typeWriter(text, element, speed = 30) {
  let i = 0;
  element.innerHTML = '';
  
  function type() {
    if (i < text.length) {
      element.innerHTML += text.charAt(i);
      i++;
      setTimeout(type, speed);
    }
  }
  type();
}

// 5. Open First Heart (ä¿®å¤äº†æ—‹è½¬é—®é¢˜)
function openFirstHeart() {
  const heartContainer = document.getElementById("firstHeartContainer");
  // ç§»é™¤æ—‹è½¬ï¼Œåªä¿ç•™ç¼©æ”¾å’Œé€æ˜åº¦å˜åŒ–
  heartContainer.style.transform = "scale(0.8)";
  heartContainer.style.opacity = "0";
  heartContainer.style.boxShadow = "none";

  setTimeout(() => {
    heartContainer.style.display = "none";
    const textBox = document.getElementById("firstTextBox");
    textBox.classList.add("active");
    const contentText = document.getElementById("firstContentText");
    typeWriter(firstMemoryTexts[0], contentText);
  }, 300);
}

// 6. Next First Text
function nextFirstText() {
  const contentText = document.getElementById("firstContentText");
  contentText.style.opacity = "0";
  contentText.style.transform = "translateY(10px)";

  setTimeout(() => {
    firstTextIndex++;
    if (firstTextIndex < firstMemoryTexts.length) {
      typeWriter(firstMemoryTexts[firstTextIndex], contentText);
      contentText.style.opacity = "1";
      contentText.style.transform = "translateY(0)";
    } else {
      // Move to second confession screen
      switchScreen("content", "secondContent");
    }
  }, 300);
}

// 7. Open Second Heart (ä¿®å¤äº†æ—‹è½¬é—®é¢˜)
function openSecondHeart() {
  const heartContainer = document.getElementById("secondHeartContainer");
  // ç§»é™¤æ—‹è½¬ï¼Œåªä¿ç•™ç¼©æ”¾å’Œé€æ˜åº¦å˜åŒ–
  heartContainer.style.transform = "scale(0.8)";
  heartContainer.style.opacity = "0";
  heartContainer.style.boxShadow = "none";

  setTimeout(() => {
    heartContainer.style.display = "none";
    const textBox = document.getElementById("secondTextBox");
    textBox.classList.add("active");
    const contentText = document.getElementById("secondContentText");
    typeWriter(secondMemoryTexts[0], contentText);
  }, 300);
}

// 8. Next Second Text
function nextSecondText() {
  const contentText = document.getElementById("secondContentText");
  contentText.style.opacity = "0";
  contentText.style.transform = "translateY(10px)";

  setTimeout(() => {
    secondTextIndex++;
    if (secondTextIndex < secondMemoryTexts.length) {
      typeWriter(secondMemoryTexts[secondTextIndex], contentText);
      contentText.style.opacity = "1";
      contentText.style.transform = "translateY(0)";
    } else {
      // Move to Valentine screen
      switchScreen("secondContent", "val");
    }
  }, 300);
}

// Global counter for dodge attempts (èº²é¿æ¬¡æ•°è®¡æ•°å™¨)
let dodgeCount = 0;

// Playful text responses (è°ƒçš®çš„è‹±æ–‡æ–‡æ¡ˆ)
const naughtyTexts = [
  "No ğŸ™ƒ",
  "Not gonna happen ğŸ¤",
  "Catch me if you can ğŸ˜œ",
  "I'm running away ğŸƒâ€â™€ï¸",
  "Stop chasing me â¤ï¸",
  "Eek! So scary ğŸ˜",
  "Okay fine... you win",
  "Yes ğŸ’•" // Final surrender - turn into Yes button
];

// Track mouse position in real-time (å®æ—¶è®°å½•é¼ æ ‡ä½ç½®)
let mouseX = 0, mouseY = 0;
document.addEventListener("mousemove", (e) => {
  mouseX = e.clientX;
  mouseY = e.clientY;
});

// ã€ULTIMATE PLAYFUL NO BUTTONã€‘ (ç»ˆæç‰ˆè¶£å‘³NoæŒ‰é’®)
function moveNo(e) {
  const noBtn = document.getElementById("noBtn");
  const zone = document.querySelector(".button-zone");
  const zoneRect = zone.getBoundingClientRect();
  const btnRect = noBtn.getBoundingClientRect();

  // Increment dodge counter (å¢åŠ èº²é¿æ¬¡æ•°)
  dodgeCount++;

  // Calculate distance: closer = run faster (è®¡ç®—è·ç¦»ï¼šè¶Šè¿‘è·‘å¾—è¶Šå¿«)
  const btnCenterX = btnRect.left + btnRect.width / 2;
  const btnCenterY = btnRect.top + btnRect.height / 2;
  const dist = Math.hypot(mouseX - btnCenterX, mouseY - btnCenterY);

  // Run away faster when mouse is close (é¼ æ ‡é è¿‘æ—¶åŠ é€Ÿé€ƒè·‘)
  const runAwayDistance = dist < 80 ? 120 : 50;

  // Generate random new position (ç”Ÿæˆéšæœºæ–°ä½ç½®)
  const maxX = zoneRect.width - noBtn.offsetWidth;
  const maxY = zoneRect.height - noBtn.offsetHeight;
  const randomX = Math.random() * maxX;
  const randomY = Math.random() * maxY;

  // Shrink button & reduce opacity with more attempts (ç‚¹å‡»æ¬¡æ•°è¶Šå¤šï¼ŒæŒ‰é’®è¶Šå°/è¶Šé€æ˜)
  let scale = 1;
  let opacity = 1;
  if (dodgeCount > 2) scale = 0.9;
  if (dodgeCount > 5) scale = 0.8;
  if (dodgeCount > 8) scale = 0.7;
  if (dodgeCount > 12) opacity = 0.8;
  if (dodgeCount > 16) opacity = 0.6;

  // Limit text index to avoid overflow (é™åˆ¶æ–‡æ¡ˆç´¢å¼•ï¼Œé˜²æ­¢è¶Šç•Œ)
  let textIndex = Math.min(dodgeCount, naughtyTexts.length - 1);

  // Apply all styles to button (åº”ç”¨æ‰€æœ‰æ ·å¼åˆ°æŒ‰é’®)
  noBtn.style.left = randomX + "px";
  noBtn.style.top = randomY + "px";
  noBtn.style.transform = `translate(0,0) scale(${scale})`;
  noBtn.style.opacity = opacity;
  noBtn.innerText = naughtyTexts[textIndex];

  // Final surrender: auto trigger YES (æœ€åæ‘†çƒ‚ï¼šè‡ªåŠ¨è§¦å‘Yes)
  if (dodgeCount >= naughtyTexts.length - 1) {
    setTimeout(() => {
      yes(); // Trigger celebration screen (è§¦å‘åº†ç¥é¡µé¢)
    }, 400);
  }

  // Prevent default behavior (é˜»æ­¢é»˜è®¤äº‹ä»¶)
  if (e) e.preventDefault();
}

// Mobile touch support (ç§»åŠ¨ç«¯è§¦æ‘¸é€‚é…)
function moveNoTouch(e) {
  if (e.touches[0]) {
    mouseX = e.touches[0].clientX;
    mouseY = e.touches[0].clientY;
    moveNo(e);
  }
}

// 10. YES CELEBRATION (Working Version Confetti)
function yes() {
  // 1. Hide valentine screen
  switchScreen("val", "yes");
  
  // 2. Create confetti explosion (Working Version)
  for(let i=0; i<100; i++){
    const c = document.createElement("div");
    c.className = "confetti";
    c.style.left = Math.random() * 100 + "vw";
    c.style.background = ["#ff4d94","#ff99cc","#ffffff","#ff3385","#ff66a3"][Math.floor(Math.random()*5)];
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 5000);
  }
  
  // 3. Animate text lines one by one
  setTimeout(() => {
    document.getElementById("celebrationLine1").classList.add("active");
    
    setTimeout(() => {
      document.getElementById("celebrationLine2").classList.add("active");
      
      setTimeout(() => {
        document.getElementById("celebrationLine3").classList.add("active");
        
        setTimeout(() => {
          document.getElementById("celebrationLine4").classList.add("active");
          
          // Show final CTA button
          setTimeout(() => {
            document.getElementById("finalCtaBtn").classList.add("active");
          }, 800);
        }, 800);
      }, 800);
    }, 800);
  }, 500);
}

// Final cute message
function finalMessage() {
  // Add extra hearts
  for (let i = 0; i < 100; i++) {
    setTimeout(() => {
      const heart = document.createElement('div');
      heart.classList.add('heart');
      heart.style.left = Math.random() * 100 + "vw";
      heart.style.width = (Math.random() * 20 + 5) + "px";
      heart.style.height = (Math.random() * 20 + 5) + "px";
      heart.style.opacity = Math.random() * 0.9 + 0.1;
      document.body.appendChild(heart);
      setTimeout(() => heart.remove(), 10000);
    }, i * 50);
  }
  
  // Update celebration text
  document.querySelector(".celebration-text h2").innerText = "I know words dont mean as much as actions, so I hope time will show how much you mean to me";
  document.getElementById("celebrationLine1").innerText = "";
  document.getElementById("celebrationLine2").innerText = "";
  document.getElementById("celebrationLine3").style.display = "none";
  document.getElementById("celebrationLine4").style.display = "none";
  
  // Hide button
  document.getElementById("finalCtaBtn").style.display = "none";
}

// Keyboard support for password (Enter key)
document.getElementById("passwordInput").addEventListener("keypress", function(e) {
  if (e.key === "Enter") {
    unlock();
  }
});

// Mobile touch fix
document.addEventListener("touchmove", (e) => {
  if (screens.val.classList.contains("active") || screens.yes.classList.contains("active")) {
    e.preventDefault();
  }
}, { passive: false });
</script>
</body>
</html>












